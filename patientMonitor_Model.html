<!DOCTYPE html>
<meta charset="utf-8">
<head>
<style>
path {  stroke: #fff; }
path:hover {  opacity:0.9; }
rect:hover {  fill:blue; }
.axis {  font: 10px sans-serif; }
.legend tr{    border-bottom:1px solid grey; }
.legend tr:first-child{    border-top:1px solid grey; }

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.x.axis path {  display: none; }
.legend{
    margin-bottom:76px;
    display:inline-block;
    border-collapse: collapse;
    border-spacing: 0px;
}
.legend td{
    padding:4px 5px;
    vertical-align:bottom;
}
.legendFreq, .legendPerc{
    align:right;
    width:50px;
}
.node rect {
  cursor: pointer;
  fill: #fff;
  fill-opacity: 0.5;
  stroke: #3182bd;
  stroke-width: 1.5px;
}

.node text {
  font: 10px sans-serif;
  pointer-events: none;
}

.link {
  fill: none;
  stroke: #9ecae1;
  stroke-width: 1.5px;
}

</style>
  <meta charset="utf-8">
  <title>Bell Bootstrap 4 Theme</title>
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="" name="keywords">
  <meta content="" name="description">

  <!-- Facebook Opengraph integration: https://developers.facebook.com/docs/sharing/opengraph -->
  <meta property="og:title" content="">
  <meta property="og:image" content="">
  <meta property="og:url" content="">
  <meta property="og:site_name" content="">
  <meta property="og:description" content="">

  <!-- Twitter Cards integration: https://dev.twitter.com/cards/  -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="">
  <meta name="twitter:title" content="">
  <meta name="twitter:description" content="">
  <meta name="twitter:image" content="">

  <!-- Favicon -->
  <link href="img/favicon.ico" rel="icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,500,700|Roboto:400,900" rel="stylesheet">

  <!-- Bootstrap CSS File -->
  <link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Libraries CSS Files -->
  <link href="lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">

  <!-- Main Stylesheet File -->
  <link href="css/style.css" rel="stylesheet">

  <!-- =======================================================
    Theme Name: Bell
    Theme URL: https://bootstrapmade.com/bell-free-bootstrap-4-template/
    Author: BootstrapMade.com
    Author URL: https://bootstrapmade.com
  ======================================================= -->
</head>
<body>

<section class="hero">
    <div class="container text-center">
      <div class="row">
        <div class="col-md-12">
          <a class="hero-brand" href="index.html" title="Home"><img alt="B Logo" src="img/logo2.png"></a>
        </div>
      </div>

      <div class="col-md-12">
        <h1>
            A Real Time Patient Health Monitoring System
          </h1>

        <p class="tagline">
          This is a real time monitoring tool that helps the doctor, nurse to get the continous health status of the patient with constant alerts and notifications enriched with analytics. 
        </p>
        <a class="btn btn-full" href="#about">About P-Monitor</a>
      </div>
    </div>

  </section>
  <!-- /Hero -->

  <!-- Header -->
  <header id="header">
    <div class="container">

      <div id="logo" class="pull-left">
        <!--<a href="index.html"><img src="img/logo2.png" alt="" title="" /></img></a> -->
        <!-- Uncomment below if you prefer to use a text image -->
        <h1><a href="#hero">patientMonitor_Model</a></h1>
      </div>

      <nav id="nav-menu-container">
        <ul class="nav-menu">
          <li><a href="#about">About P-Monitor</a></li>
          <li><a href="#features">Features</a></li>
          <li><a href="#portfolio">Architecture</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
      <!-- #nav-menu-container -->

      <nav class="nav social-nav pull-right d-none d-lg-inline">
        <a href="#"><i class="fa fa-twitter"></i></a> <a href="#"><i class="fa fa-facebook"></i></a> <a href="#"><i class="fa fa-linkedin"></i></a> <a href="#"><i class="fa fa-envelope"></i></a>
      </nav>
    </div>
  </header>
  <!-- #header -->

  <!-- About -->

  <section class="about" id="about">
    <div class="container text-center">
      <h2>
          About P-Monitor
        </h2>

      <p>
        P-Monitor is a real-time patient monitoring system that provides real time health status, it also provides real time analytics as well as predictive analytics on patient health based on the data gathered. The statistics below show various
		apects of the system. The first one describes the sum of the number of ports and the subsystems associated to a system to denote the coupling. The second represents the tree view of the system model </li>
		The third gives a dashboard view on different components associated with each of the subsystem. <br />
		<i> pmonitor is the system comprising of the other 3 systems : sensor, backend and ui </i>

      </p>
	  
	  <div class="row stats-row">
				
        		<div class="stats-col text-center col-md-3 col-sm-6">
          		<div class="circle">
            		<span class="stats-no" data-toggle="counter-up">12</span> pm_backend
          		</div>
        		</div>
				
        		<div class="stats-col text-center col-md-3 col-sm-6">
          		<div class="circle">
            		<span class="stats-no" data-toggle="counter-up">15</span> pmonitor 
          		</div>
        		</div>
				
        		<div class="stats-col text-center col-md-3 col-sm-6">
          		<div class="circle">
            		<span class="stats-no" data-toggle="counter-up">12</span> sensor_system
          		</div>
        		</div>
				
        		<div class="stats-col text-center col-md-3 col-sm-6">
          		<div class="circle">
            		<span class="stats-no" data-toggle="counter-up">4</span> ui_system
          		</div>
        		</div>
  
      </div>
    </div>
    <center>
	<br />
	<h3> A Tree view of the system model </h3>
	<div id ='indent'>
    </div>
	<h3> A Dashboard view of the Subsystems </h3>
    <div id ='dashboard'>
    </div>
    </center>
  </section>
  <!-- /About -->
  <!-- Parallax -->
  <!-- /Parallax -->
  <!-- Features -->
  <section class="features" id="features">
    <div class="container">
      <h2 class="text-center">
          Features
        </h2>

      <div class="row">
        <div class="feature-col col-lg-4 col-xs-12">
          <div class="card card-block text-center">
            <div>
              <div class="feature-icon">
                <span class="fa fa-rocket"></span>
              </div>
            </div>

            <div>
              <h3>
                  Micro-Service Based
                </h3>

              <p>
                The architecture is micro-service architecture which leverages the system by ease of design and seperation of concern.
              </p>
            </div>
          </div>
        </div>

        <div class="feature-col col-lg-4 col-xs-12">
          <div class="card card-block text-center">
            <div>
              <div class="feature-icon">
                <span class="fa fa-envelope"></span>
              </div>
            </div>

            <div>
              <h3>
                  Real-Time data stream
                </h3>

              <p>
                The system exploits the micro-service based approach to stream data from the sensor directly to the sensor through a time series
				database ensuring the availability of data in real time.
              </p>
            </div>
          </div>
        </div>

        <div class="feature-col col-lg-4 col-xs-12">
          <div class="card card-block text-center">
            <div>
              <div class="feature-icon">
                <span class="fa fa-bell"></span>
              </div>
            </div>

            <div>
              <h3>
                  Alerts
                </h3>

              <p>
                Alerts and notifications including the critical ones are sent through a separate channel consisting of light-weight threads on real-time basis thus ensuring that any emergency situation
				is reported immidiately.			
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="feature-col col-lg-4 col-xs-12">
          <div class="card card-block text-center">
            <div>
              <div class="feature-icon">
                <span class="fa fa-database"></span>
              </div>
            </div>

            <div>
              <h3>
                  Multiple Data bases
                </h3>

              <p>
                The system uses NoSQL for perfoming basic analytics, Time series DB for real time data and a SQL DB for storing patient related and sensor related information.
              </p>
            </div>
          </div>
        </div>

        <div class="feature-col col-lg-4 col-xs-12">
          <div class="card card-block text-center">
            <div>
              <div class="feature-icon">
                <span class="fa fa-cutlery"></span>
              </div>
            </div>

            <div>
              <h3>
                  Customizable features
                </h3>

              <p>
                Since it is a micro-service based architecture, any changes or additional features can be integrated to the existing system 
				in no time
              </p>
            </div>
          </div>
        </div>

        <div class="feature-col col-lg-4 col-xs-12">
          <div class="card card-block text-center">
            <div>
              <div class="feature-icon">
                <span class="fa fa-dashboard"></span>
              </div>
            </div>

            <div>
              <h3>
                  Faster Time to Market
                </h3>

              <p>
                The system has been developed keeping in mind, the different possible use cases and the architecture gives the flexibility to make changes 
				on the fly and to launch in the market the easiest way possible.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- /Features -->
  <!-- Call to Action -->

  <!-- /Call to Action -->
  <!-- Portfolio -->

  <section class="portfolio" id="portfolio">
    <div class="container text-center">
      <h2>
          P-Monitor Architecture
        </h2>

      <p>
		Th image below shows the high level architecture of the system. The architecture used by the system is based on Micro-services
      </p>
    </div>
	<center>
	<img src="img\PMonitor_Final.jpg" alt="Architecutre">
   </center>
   
  </section>
  <!-- /Portfolio -->
  <!-- Team -->
  <!-- /Team -->
  <!-- @component: footer -->

  <section id="contact">
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-center">
          <h2 class="section-title">Contact Us</h2>
        </div>
      </div>

      <div class="row justify-content-center">
        <div class="col-lg-3 col-md-4">
          <div class="info">
            <div>
              <i class="fa fa-map-marker"></i>
              <p>Gran Sasso Science Institute, Viale Franceso Crispi<br>L'Aquila, AQ 67100, Italy</p>
            </div>

            <div>
              <i class="fa fa-envelope"></i>
              <p>karthik.vaidhyanathan@gssi.it <br> asma.tajuddin@gssi.it</p>
            </div>

            <div>
              <i class="fa fa-phone"></i>
              <p>+39 347 876 7250</p>
            </div>

          </div>
        </div>

        <div class="col-lg-5 col-md-8">
          <div class="form">
            <div id="sendmessage">Your message has been sent. Thank you!</div>
            <div id="errormessage"></div>
            <form action="" method="post" role="form" class="contactForm">
              <div class="form-group">
                <input type="text" name="name" class="form-control" id="name" placeholder="Your Name" data-rule="minlen:4" data-msg="Please enter at least 4 chars" />
                <div class="validation"></div>
              </div>
              <div class="form-group">
                <input type="email" class="form-control" name="email" id="email" placeholder="Your Email" data-rule="email" data-msg="Please enter a valid email" />
                <div class="validation"></div>
              </div>
              <div class="form-group">
                <input type="text" class="form-control" name="subject" id="subject" placeholder="Subject" data-rule="minlen:4" data-msg="Please enter at least 8 chars of subject" />
                <div class="validation"></div>
              </div>
              <div class="form-group">
                <textarea class="form-control" name="message" rows="5" data-rule="required" data-msg="Please write something for us" placeholder="Message"></textarea>
                <div class="validation"></div>
              </div>
              <div class="text-center"><button type="submit">Send Message</button></div>
            </form>
          </div>
        </div>

      </div>
    </div>
    <div id = "dashboard"> </div>
  </section>
  
  <footer class="site-footer">
    <div class="bottom">
      <div class="container">
        <div class="row">

          <div class="col-lg-6 col-xs-12 text-lg-left text-center">
            <p class="copyright-text">
              Â© BELL Theme
            </p>
            <div class="credits">
              <!--
                All the links in the footer should remain intact.
                You can delete the links only if you purchased the pro version.
                Licensing information: https://bootstrapmade.com/license/
                Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/buy/?theme=Bell
              -->
              <a href="https://bootstrapmade.com/">Bootstrap Templates</a> by BootstrapMade
            </div>
          </div>

          <div class="col-lg-6 col-xs-12 text-lg-right text-center">
            <ul class="list-inline">
              <li class="list-inline-item">
                <a href="index.html">Home</a>
              </li>

              <li class="list-inline-item">
                <a href="#about">About P-Monitor</a>
              </li>

              <li class="list-inline-item">
                <a href="#features">Features</a>
              </li>

              <li class="list-inline-item">
                <a href="#portfolio">Architecture</a>
              </li>

              <li class="list-inline-item">
                <a href="#contact">Contact</a>
              </li>
            </ul>
          </div>

        </div>
      </div>
    </div>
  </footer>
  <a class="scrolltop" href="#"><span class="fa fa-angle-up"></span></a>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
function dashboard(id, fData){
    var barColor = 'steelblue';
    function segColor(c){ return {subsystem:"#807dba", ports:"#e08214",process:"#41ab5d",devices:'#EC070B',access : '#0D0DED',bus : '#07EFDF', processor : '#FC0C58'}[c]; }
    
    // compute total for each state.
    fData.forEach(function(d){d.total=d.freq.subsystem+d.freq.ports+d.freq.process + d.freq.devices + d.freq.access +d.freq.bus + d.freq.processor;});
    
    // function to handle histogram.
    function histoGram(fD){
        var hG={},    hGDim = {t: 60, r: 0, b: 30, l: 0};
        hGDim.w = 500 - hGDim.l - hGDim.r, 
        hGDim.h = 300 - hGDim.t - hGDim.b;
            
        //create svg for histogram.
        var hGsvg = d3.select(id).append("svg")
            .attr("width", hGDim.w + hGDim.l + hGDim.r)
            .attr("height", hGDim.h + hGDim.t + hGDim.b).append("g")
            .attr("transform", "translate(" + hGDim.l + "," + hGDim.t + ")");

        // create function for x-axis mapping.
        var x = d3.scaleBand().rangeRound([0, hGDim.w],0.1)
                .domain(fD.map(function(d) { return d[0]; }));

        // Add x-axis to the histogram svg.
        hGsvg.append("g").attr("class", "x axis")
            .attr("transform", "translate(0," + hGDim.h + ")")
            .call(d3.axisBottom(x));

        // Create function for y-axis map.
        var y = d3.scaleLinear().range([hGDim.h, 0])
                .domain([0, d3.max(fD, function(d) { return d[1]; })]);

        // Create bars for histogram to contain rectangles and freq labels.
        var bars = hGsvg.selectAll(".bar").data(fD).enter()
                .append("g").attr("class", "bar");
        
        //create the rectangles.
        bars.append("rect")
            .attr("x", function(d) { return x(d[0]); })
            .attr("y", function(d) { return y(d[1]); })
            .attr("width", x.bandwidth()-4)
            .attr("height", function(d) { return hGDim.h - y(d[1]); })
            .attr('fill',barColor)
            .on("mouseover",mouseover)// mouseover is defined below.
            .on("mouseout",mouseout);// mouseout is defined below.
            
        console.log(x.bandwidth());
		//Create the frequency labels above the rectangles.
        bars.append("text").text(function(d){ return d3.format(",")(d[1])})
            .attr("x", function(d) { return x(d[0])+x.bandwidth()/2; })
            .attr("y", function(d) { return y(d[1])-5; })
            .attr("text-anchor", "middle");
        
        function mouseover(d){  // utility function to be called on mouseover.
            // filter for selected state.
            var st = fData.filter(function(s){ return s.State == d[0];})[0],
                nD = d3.keys(st.freq).map(function(s){ return {type:s, freq:st.freq[s]};});
               
            // call update functions of pie-chart and legend.    
            pC.update(nD);
            leg.update(nD);
        }
        
        function mouseout(d){    // utility function to be called on mouseout.
            // reset the pie-chart and legend.    
            pC.update(tF);
            leg.update(tF);
        }
        
        // create function to update the bars. This will be used by pie-chart.
        hG.update = function(nD, color){
            // update the domain of the y-axis map to reflect change in frequencies.
            y.domain([0, d3.max(nD, function(d) { return d[1]; })]);
            
            // Attach the new data to the bars.
            var bars = hGsvg.selectAll(".bar").data(nD);
            
            // transition the height and color of rectangles.
            bars.select("rect").transition().duration(500)
                .attr("y", function(d) {return y(d[1]); })
                .attr("height", function(d) { return hGDim.h - y(d[1]); })
                .attr("fill", color);

            // transition the frequency labels location and change value.
            bars.select("text").transition().duration(500)
                .text(function(d){ return d3.format(",")(d[1])})
                .attr("y", function(d) {return y(d[1])-5; });            
        }        
        return hG;
    }
    
    // function to handle pieChart.
    function pieChart(pD){
        var pC ={},    pieDim ={w:250, h: 250};
        pieDim.r = Math.min(pieDim.w, pieDim.h) / 2;
                
        // create svg for pie chart.
        var piesvg = d3.select(id).append("svg")
            .attr("width", pieDim.w).attr("height", pieDim.h).append("g")
            .attr("transform", "translate("+pieDim.w/2+","+pieDim.h/2+")");
        
        // create function to draw the arcs of the pie slices.
        var arc = d3.arc().outerRadius(pieDim.r - 10).innerRadius(0);

        // create a function to compute the pie slice angles.
        var pie = d3.pie().sort(null).value(function(d) { return d.freq; });

        // Draw the pie slices.
        piesvg.selectAll("path").data(pie(pD)).enter().append("path").attr("d", arc)
            .each(function(d) { this._current = d; })
            .style("fill", function(d) { return segColor(d.data.type); })
            .on("mouseover",mouseover).on("mouseout",mouseout);

        // create function to update pie-chart. This will be used by histogram.
        pC.update = function(nD){
            piesvg.selectAll("path").data(pie(nD)).transition().duration(500)
                .attrTween("d", arcTween);
        }        
        // Utility function to be called on mouseover a pie slice.
        function mouseover(d){
            // call the update function of histogram with new data.
            hG.update(fData.map(function(v){ 
                return [v.State,v.freq[d.data.type]];}),segColor(d.data.type));
        }
        //Utility function to be called on mouseout a pie slice.
        function mouseout(d){
            // call the update function of histogram with all data.
            hG.update(fData.map(function(v){
                return [v.State,v.total];}), barColor);
        }
        // Animating the pie-slice requiring a custom function which specifies
        // how the intermediate paths should be drawn.
        function arcTween(a) {
            var i = d3.interpolate(this._current, a);
            this._current = i(0);
            return function(t) { return arc(i(t));    };
        }    
        return pC;
    }
    
    // function to handle legend.
    function legend(lD){
        var leg = {};
            
        // create table for legend.
        var legend = d3.select(id).append("table").attr('class','legend');
        
        // create one row per segment.
        var tr = legend.append("tbody").selectAll("tr").data(lD).enter().append("tr");
            
        // create the first column for each segment.
        tr.append("td").append("svg").attr("width", '16').attr("height", '16').append("rect")
            .attr("width", '16').attr("height", '16')
            .attr("fill",function(d){ return segColor(d.type); });
            
        // create the second column for each segment.
        tr.append("td").text(function(d){ return d.type;});

        // create the third column for each segment.
        tr.append("td").attr("class",'legendFreq')
            .text(function(d){ return d3.format(",")(d.freq);});

        // create the fourth column for each segment.
        tr.append("td").attr("class",'legendPerc')
            .text(function(d){ return getLegend(d,lD);});
        // Utility function to be used to update the legend.
        leg.update = function(nD){
            // update the data attached to the row elements.
            var l = legend.select("tbody").selectAll("tr").data(nD);

            // update the frequencies.
            l.select(".legendFreq").text(function(d){ return d3.format(",")(d.freq);});

            // update the percentage column.
            l.select(".legendPerc").text(function(d){ return getLegend(d,nD);});        
        }
        
        function getLegend(d,aD){ // Utility function to compute percentage.
            return d3.format("%")(d.freq/d3.sum(aD.map(function(v){ return v.freq; })));
        }

        return leg;
    }
   //subsystem+ ports+process + devices + access +bus + processor
    // calculate total frequency by segment for all state.
    var tF = ['subsystem','ports','process','devices','access','bus','processor'].map(function(d){ 
        return {type:d, freq: d3.sum(fData.map(function(t){ return t.freq[d];}))}; 
    });    
    
    // calculate total frequency by state for all segment.
    var sF = fData.map(function(d){return [d.State,d.total];});

    var hG = histoGram(sF), // create the histogram.
        pC = pieChart(tF), // create the pie-chart.
        leg= legend(tF);  // create the legend.
}

</script>
<script>
var margin = {top: 30, right: 20, bottom: 30, left: 20},
    width = 960,
    barHeight = 20,
    barWidth = (width - margin.left - margin.right) * 0.8;

var i = 0,
    duration = 400,
    root;

var diagonal = d3.linkHorizontal()
    .x(function(d) { return d.y; })
    .y(function(d) { return d.x; });

var svg = d3.select("#indent").append("svg")
    .attr("width", width) // + margin.left + margin.right)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var jsonObj = {};
jsonObj.name = "patientMonitor_Model";
jsonList = [];

implDict = {};
implDict = {};
implDict.name = "System Implementations";
implDict.children = [];

dataDict = {};
dataDict.name = "Data Types";
dataDict.children = [];

sysDict = {};
sysDict.name = "System Types";
sysDict.children = [];

bsDict = {};
bsDict.name = "Bus Types";
bsDict.children = [];

prDict = {};
prDict.name = "Process Types";
prDict.children  = [];

trDict = {};
trDict.name = "Thread Types";
trDict.children  = [];


jsonList.push(dataDict);
jsonList.push(sysDict);
jsonList.push(bsDict);
jsonList.push(prDict);
jsonList.push(trDict);
jsonList.push(implDict);
var frequencyData = [];
	
			keyDict = {};
			keyDict.name = "System : " + "ui_system";
			keyDict.children = [];
			sysDict.children.push(keyDict);
	
	
	
			keyDict = {};
			keyDict.name = "Data Type : " + "response";
			keyDict.children = [];
			dataDict.children.push(keyDict);
	
	
	
	
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Thread : " + "send_alerts";
			keyDict.children = [];
			trDict.children.push(keyDict);
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Data Type : " + "bp_val";
			keyDict.children = [];
			dataDict.children.push(keyDict);
	
	
	
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Process : " + "data_acquisition";
			keyDict.children = [];
			prDict.children.push(keyDict);
	
	
	
	
			keyDict = {};
			keyDict.name = "Process : " + "decision_making";
			keyDict.children = [];
			prDict.children.push(keyDict);
	
	
	
	
			keyDict = {};
			keyDict.name = "Process : " + "predictive_analytics";
			keyDict.children = [];
			prDict.children.push(keyDict);
	
	
			jsonDict = {};
			jsonDict.name = "pm_backend_system";
			jsonDict.children = [];
			//jsonList.push(jsonDict);
			implDict.children.push(jsonDict);
			subSystemDict = {}
			subSystemDict.name = "subsystems";
			subSystemDict.children =  [];
			var counter = 0;
			var subsystem_count = 0;
			var ports_count  = 0;
			var process_count = 0;
			var device_count = 0;
			var processor_count = 0;
			var access_count = 0;
			var bus_count = 0;
			
			freqDict = {};
			freqDict.State = "pm_backend_system";
			
			countDict = {};
			if (counter > 0)
			{
			subsystem_count = counter;
			jsonDict.children.push(subSystemDict);
			counter = 0;
			}
			
			portDict = {}
			portDict.name = "ports";
			portDict.children = [];
			
				keyDict = {};
				keyDict.name = "Port : " + "alert_request " +"internal_request";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "sensor_data " +"internal_request";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "process_input " +"response_in";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "data_request " +"internal_request";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "notification_out " +"request_out";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "data_response " +"data_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "alert_response " +"alert_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "notif_response " +"notification_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "process_request " +"request_out";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "notification_in " +"internal_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "send_critical_data " +"data_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "send_critical_status " +"data_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				ports_count = counter;
				jsonDict.children.push(portDict);
				counter = 0;
			}
			
			deviceDict = {}
			deviceDict.name = "devices";
			deviceDict.children =  [];
			if (counter > 0)
			{
				device_count = counter;
				jsonDict.children.push(deviceDict);
				counter = 0;
			}
			processDict = {};
			processDict.name = "Processes";
			processDict.children =  [];
			var pro_counter = 0;
				keyDict = {};
				keyDict.name = "process : " + "real_time_analytics";
				keyDict.children = [];
				pro_counter = pro_counter + 1;
				processDict.children.push(keyDict);
				keyDict = {};
				keyDict.name = "process : " + "predictive_analytics";
				keyDict.children = [];
				pro_counter = pro_counter + 1;
								portDict = {};
								portDict.name = "ports";
								portDict.children = [];
									if (counter > 0)
									{
										keyDict.children.push(portDict);
										counter = 0;
									}			
				processDict.children.push(keyDict);
				keyDict = {};
				keyDict.name = "process : " + "notification_center";
				keyDict.children = [];
				pro_counter = pro_counter + 1;
				processDict.children.push(keyDict);
				keyDict = {};
				keyDict.name = "process : " + "monitoring";
				keyDict.children = [];
				pro_counter = pro_counter + 1;
				processDict.children.push(keyDict);
				keyDict = {};
				keyDict.name = "process : " + "decision_making";
				keyDict.children = [];
				pro_counter = pro_counter + 1;
								portDict = {};
								portDict.name = "ports";
								portDict.children = [];
									if (counter > 0)
									{
										keyDict.children.push(portDict);
										counter = 0;
									}			
				processDict.children.push(keyDict);
			if (pro_counter > 0)
			{
				process_count = pro_counter;
				jsonDict.children.push(processDict);
				pro_counter = 0;
			}
			
			processorDict = {}
			processorDict.name = "processors";
			processorDict.children =  [];
				keyDict = {};
				keyDict.name = "Processor : " + "cpu";
				keyDict.children = [];
				processorDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				processor_count = counter;
				jsonDict.children.push(processorDict);
				counter = 0;
			}
			
			busDict = {};
			busDict.name = "Buses";
			busDict.children =  [];
			if (counter > 0)
			{
				bus_count = counter;
				jsonDict.children.push(busDict);
				counter = 0;
			}
			accessDict = {};
			accessDict.name = "Access";
			accessDict.children =  [];
				keyDict = {};
				keyDict.name = "Access Connection : " + "network";
				keyDict.children = [];
				accessDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				access_count = counter;
				jsonDict.children.push(accessDict);
				counter = 0;
			}
		countDict.subsystem = subsystem_count;
		countDict.ports = ports_count;
		countDict.process = process_count;
		countDict.devices = device_count;
		countDict.processor = processor_count;
		countDict.access = access_count;
		countDict.bus = bus_count;
		
		freqDict.freq = countDict;
		frequencyData.push(freqDict);
		console.log(frequencyData);
	
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Data Type : " + "request";
			keyDict.children = [];
			dataDict.children.push(keyDict);
	
	
	
	
			jsonDict = {};
			jsonDict.name = "pmonitor.complete";
			jsonDict.children = [];
			//jsonList.push(jsonDict);
			implDict.children.push(jsonDict);
			subSystemDict = {}
			subSystemDict.name = "subsystems";
			subSystemDict.children =  [];
			var counter = 0;
			var subsystem_count = 0;
			var ports_count  = 0;
			var process_count = 0;
			var device_count = 0;
			var processor_count = 0;
			var access_count = 0;
			var bus_count = 0;
			
			freqDict = {};
			freqDict.State = "pmonitor.complete";
			
			countDict = {};
				newDict = {};
				newDict.name = "subsystem : " + "backend_system";
				counter = counter + 1;
				newDict.children = [];
				subSystemDict.children.push(newDict);
				newDict = {};
				newDict.name = "subsystem : " + "pc";
				counter = counter + 1;
				newDict.children = [];
				subSystemDict.children.push(newDict);
				newDict = {};
				newDict.name = "subsystem : " + "ui_system";
				counter = counter + 1;
				newDict.children = [];
				subSystemDict.children.push(newDict);
				newDict = {};
				newDict.name = "subsystem : " + "smartphone";
				counter = counter + 1;
				newDict.children = [];
				subSystemDict.children.push(newDict);
				newDict = {};
				newDict.name = "subsystem : " + "sensor_system";
				counter = counter + 1;
				newDict.children = [];
				subSystemDict.children.push(newDict);
			if (counter > 0)
			{
			subsystem_count = counter;
			jsonDict.children.push(subSystemDict);
			counter = 0;
			}
			
			portDict = {}
			portDict.name = "ports";
			portDict.children = [];
			
				keyDict = {};
				keyDict.name = "Port : " + "user_response_smart " +"user_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "backend_ui_response " +"internal_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "ui_backend_request " +"request_out";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "user_request_pc " +"user_request";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "backend_sensor_control " +"request_out";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "sensor_backend_control " +"c_internal_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "sensor_backend_data " +"d_internal_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "backend_sensor_data " +"request_out";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "user_response_pc " +"user_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "user_request_smart " +"user_request";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				ports_count = counter;
				jsonDict.children.push(portDict);
				counter = 0;
			}
			
			deviceDict = {}
			deviceDict.name = "devices";
			deviceDict.children =  [];
			if (counter > 0)
			{
				device_count = counter;
				jsonDict.children.push(deviceDict);
				counter = 0;
			}
			processDict = {};
			processDict.name = "Processes";
			processDict.children =  [];
			var pro_counter = 0;
			if (pro_counter > 0)
			{
				process_count = pro_counter;
				jsonDict.children.push(processDict);
				pro_counter = 0;
			}
			
			processorDict = {}
			processorDict.name = "processors";
			processorDict.children =  [];
			if (counter > 0)
			{
				processor_count = counter;
				jsonDict.children.push(processorDict);
				counter = 0;
			}
			
			busDict = {};
			busDict.name = "Buses";
			busDict.children =  [];
				keyDict = {};
				keyDict.name = "Bus : " + "internet_conn";
				keyDict.children = [];
				busDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				bus_count = counter;
				jsonDict.children.push(busDict);
				counter = 0;
			}
			accessDict = {};
			accessDict.name = "Access";
			accessDict.children =  [];
				keyDict = {};
				keyDict.name = "Access Connection : " + "int_pc";
				keyDict.children = [];
				accessDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Access Connection : " + "back_sys_internet";
				keyDict.children = [];
				accessDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Access Connection : " + "sensor_sys_internet";
				keyDict.children = [];
				accessDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Access Connection : " + "ui_sys_internet";
				keyDict.children = [];
				accessDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Access Connection : " + "int_smartphone";
				keyDict.children = [];
				accessDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				access_count = counter;
				jsonDict.children.push(accessDict);
				counter = 0;
			}
		countDict.subsystem = subsystem_count;
		countDict.ports = ports_count;
		countDict.process = process_count;
		countDict.devices = device_count;
		countDict.processor = processor_count;
		countDict.access = access_count;
		countDict.bus = bus_count;
		
		freqDict.freq = countDict;
		frequencyData.push(freqDict);
		console.log(frequencyData);
	
	
	
	
			keyDict = {};
			keyDict.name = "Data Type : " + "status";
			keyDict.children = [];
			dataDict.children.push(keyDict);
	
	
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "System : " + "pmonitor";
			keyDict.children = [];
			sysDict.children.push(keyDict);
	
	
	
	
	
	
	
			jsonDict = {};
			jsonDict.name = "sensor_system";
			jsonDict.children = [];
			//jsonList.push(jsonDict);
			implDict.children.push(jsonDict);
			subSystemDict = {}
			subSystemDict.name = "subsystems";
			subSystemDict.children =  [];
			var counter = 0;
			var subsystem_count = 0;
			var ports_count  = 0;
			var process_count = 0;
			var device_count = 0;
			var processor_count = 0;
			var access_count = 0;
			var bus_count = 0;
			
			freqDict = {};
			freqDict.State = "sensor_system";
			
			countDict = {};
			if (counter > 0)
			{
			subsystem_count = counter;
			jsonDict.children.push(subSystemDict);
			counter = 0;
			}
			
			portDict = {}
			portDict.name = "ports";
			portDict.children = [];
			
				keyDict = {};
				keyDict.name = "Port : " + "ecg_data " +"ecg_level";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "temp_data " +"temperature";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "frequency_o2 " +"set_acquistion_frequency";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "c_request " +"c_internal_request";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "bp_data " +"bp_level";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "d_request " +"d_internal_request";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "frequency_ecg " +"set_acquistion_frequency";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "d_response " +"data_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "o2_data " +"o2_level";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "frequency_temp " +"set_acquistion_frequency";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "c_response " +"internal_response";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "frequency_bp " +"set_acquistion_frequency";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				ports_count = counter;
				jsonDict.children.push(portDict);
				counter = 0;
			}
			
			deviceDict = {}
			deviceDict.name = "devices";
			deviceDict.children =  [];
				keyDict = {};
				keyDict.name = "Device : " + "bp_sensor";
				keyDict.children = [];
				deviceDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Device : " + "ecg_sensor";
				keyDict.children = [];
				deviceDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Device : " + "temp_sensor";
				keyDict.children = [];
				deviceDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Device : " + "o2_sensor";
				keyDict.children = [];
				deviceDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				device_count = counter;
				jsonDict.children.push(deviceDict);
				counter = 0;
			}
			processDict = {};
			processDict.name = "Processes";
			processDict.children =  [];
			var pro_counter = 0;
				keyDict = {};
				keyDict.name = "process : " + "sensor_services";
				keyDict.children = [];
				pro_counter = pro_counter + 1;
				processDict.children.push(keyDict);
			if (pro_counter > 0)
			{
				process_count = pro_counter;
				jsonDict.children.push(processDict);
				pro_counter = 0;
			}
			
			processorDict = {}
			processorDict.name = "processors";
			processorDict.children =  [];
				keyDict = {};
				keyDict.name = "Processor : " + "sensor_board";
				keyDict.children = [];
				processorDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				processor_count = counter;
				jsonDict.children.push(processorDict);
				counter = 0;
			}
			
			busDict = {};
			busDict.name = "Buses";
			busDict.children =  [];
			if (counter > 0)
			{
				bus_count = counter;
				jsonDict.children.push(busDict);
				counter = 0;
			}
			accessDict = {};
			accessDict.name = "Access";
			accessDict.children =  [];
				keyDict = {};
				keyDict.name = "Access Connection : " + "network";
				keyDict.children = [];
				accessDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				access_count = counter;
				jsonDict.children.push(accessDict);
				counter = 0;
			}
		countDict.subsystem = subsystem_count;
		countDict.ports = ports_count;
		countDict.process = process_count;
		countDict.devices = device_count;
		countDict.processor = processor_count;
		countDict.access = access_count;
		countDict.bus = bus_count;
		
		freqDict.freq = countDict;
		frequencyData.push(freqDict);
		console.log(frequencyData);
	
	
	
	
	
			keyDict = {};
			keyDict.name = "System : " + "pc";
			keyDict.children = [];
			sysDict.children.push(keyDict);
	
	
	
	
			keyDict = {};
			keyDict.name = "System : " + "smartphone";
			keyDict.children = [];
			sysDict.children.push(keyDict);
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Bus : " + "internet";
			keyDict.children = [];
			bsDict.children.push(keyDict);
	
	
	
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Process : " + "real_analytics";
			keyDict.children = [];
			prDict.children.push(keyDict);
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Bus : " + "ethernet";
			keyDict.children = [];
			bsDict.children.push(keyDict);
			keyDict = {};
			keyDict.name = "Data Type : " + "http_response";
			keyDict.children = [];
			dataDict.children.push(keyDict);
	
	
	
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Process : " + "notifications";
			keyDict.children = [];
			prDict.children.push(keyDict);
	
	
			keyDict = {};
			keyDict.name = "Data Type : " + "oxygen_val";
			keyDict.children = [];
			dataDict.children.push(keyDict);
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Process : " + "store_sql_data";
			keyDict.children = [];
			prDict.children.push(keyDict);
	
	
	
	
			keyDict = {};
			keyDict.name = "Process : " + "view_creator";
			keyDict.children = [];
			prDict.children.push(keyDict);
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Thread : " + "view_builder";
			keyDict.children = [];
			trDict.children.push(keyDict);
	
			keyDict = {};
			keyDict.name = "Data Type : " + "http_request";
			keyDict.children = [];
			dataDict.children.push(keyDict);
	
	
	
	
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Thread : " + "data_collector";
			keyDict.children = [];
			trDict.children.push(keyDict);
	
	
			keyDict = {};
			keyDict.name = "System : " + "client";
			keyDict.children = [];
			sysDict.children.push(keyDict);
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Thread : " + "data_handler";
			keyDict.children = [];
			trDict.children.push(keyDict);
	
			keyDict = {};
			keyDict.name = "Data Type : " + "ecg_val";
			keyDict.children = [];
			dataDict.children.push(keyDict);
	
	
	
	
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Thread : " + "control_sensor";
			keyDict.children = [];
			trDict.children.push(keyDict);
	
	
	
	
			keyDict = {};
			keyDict.name = "Thread : " + "critical_test";
			keyDict.children = [];
			trDict.children.push(keyDict);
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Process : " + "store_real_data";
			keyDict.children = [];
			prDict.children.push(keyDict);
	
	
	
	
	
	
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Thread : " + "push_notifications";
			keyDict.children = [];
			trDict.children.push(keyDict);
	
			keyDict = {};
			keyDict.name = "Data Type : " + "temp_val";
			keyDict.children = [];
			dataDict.children.push(keyDict);
	
	
	
	
			keyDict = {};
			keyDict.name = "Data Type : " + "time";
			keyDict.children = [];
			dataDict.children.push(keyDict);
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Process : " + "data_monitoring";
			keyDict.children = [];
			prDict.children.push(keyDict);
	
	
	
			keyDict = {};
			keyDict.name = "System : " + "pm_backend_system";
			keyDict.children = [];
			sysDict.children.push(keyDict);
	
	
	
			jsonDict = {};
			jsonDict.name = "ui_system";
			jsonDict.children = [];
			//jsonList.push(jsonDict);
			implDict.children.push(jsonDict);
			subSystemDict = {}
			subSystemDict.name = "subsystems";
			subSystemDict.children =  [];
			var counter = 0;
			var subsystem_count = 0;
			var ports_count  = 0;
			var process_count = 0;
			var device_count = 0;
			var processor_count = 0;
			var access_count = 0;
			var bus_count = 0;
			
			freqDict = {};
			freqDict.State = "ui_system";
			
			countDict = {};
			if (counter > 0)
			{
			subsystem_count = counter;
			jsonDict.children.push(subSystemDict);
			counter = 0;
			}
			
			portDict = {}
			portDict.name = "ports";
			portDict.children = [];
			
				keyDict = {};
				keyDict.name = "Port : " + "content_response " +"response_in";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "user_input " +"user_request";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "conent_request " +"request_out";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
				keyDict = {};
				keyDict.name = "Port : " + "user_view " +"user_output";
				keyDict.children = [];
				portDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				ports_count = counter;
				jsonDict.children.push(portDict);
				counter = 0;
			}
			
			deviceDict = {}
			deviceDict.name = "devices";
			deviceDict.children =  [];
			if (counter > 0)
			{
				device_count = counter;
				jsonDict.children.push(deviceDict);
				counter = 0;
			}
			processDict = {};
			processDict.name = "Processes";
			processDict.children =  [];
			var pro_counter = 0;
				keyDict = {};
				keyDict.name = "process : " + "view_builder";
				keyDict.children = [];
				pro_counter = pro_counter + 1;
				processDict.children.push(keyDict);
			if (pro_counter > 0)
			{
				process_count = pro_counter;
				jsonDict.children.push(processDict);
				pro_counter = 0;
			}
			
			processorDict = {}
			processorDict.name = "processors";
			processorDict.children =  [];
				keyDict = {};
				keyDict.name = "Processor : " + "web_server";
				keyDict.children = [];
				processorDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				processor_count = counter;
				jsonDict.children.push(processorDict);
				counter = 0;
			}
			
			busDict = {};
			busDict.name = "Buses";
			busDict.children =  [];
			if (counter > 0)
			{
				bus_count = counter;
				jsonDict.children.push(busDict);
				counter = 0;
			}
			accessDict = {};
			accessDict.name = "Access";
			accessDict.children =  [];
				keyDict = {};
				keyDict.name = "Access Connection : " + "intra_net";
				keyDict.children = [];
				accessDict.children.push(keyDict);
				counter = counter + 1;
			if (counter > 0)
			{
				access_count = counter;
				jsonDict.children.push(accessDict);
				counter = 0;
			}
		countDict.subsystem = subsystem_count;
		countDict.ports = ports_count;
		countDict.process = process_count;
		countDict.devices = device_count;
		countDict.processor = processor_count;
		countDict.access = access_count;
		countDict.bus = bus_count;
		
		freqDict.freq = countDict;
		frequencyData.push(freqDict);
		console.log(frequencyData);
	
	
	
	
	
			keyDict = {};
			keyDict.name = "System : " + "sensor_system";
			keyDict.children = [];
			sysDict.children.push(keyDict);
	
	
	
	
	
	
	
			keyDict = {};
			keyDict.name = "Data Type : " + "sensor_data";
			keyDict.children = [];
			dataDict.children.push(keyDict);
	
	
	
	
	
	
	
	
	
	
	
	
jsonObj.children = jsonList;
root = d3.hierarchy(jsonObj);
root.x0 = 0;
root.y0 = 0;
update(root);

function update(source) {

  // Compute the flattened node list.
  var nodes = root.descendants();

  var height = Math.max(500, nodes.length * barHeight + margin.top + margin.bottom);

  d3.select("svg").transition()
      .duration(duration)
      .attr("height", height);

  d3.select(self.frameElement).transition()
      .duration(duration)
      .style("height", height + "px");

  // Compute the "layout". TODO https://github.com/d3/d3-hierarchy/issues/67
  var index = -1;
  root.eachBefore(function(n) {
    n.x = ++index * barHeight;
    n.y = n.depth * 20;
  });

  // Update the nodesâ¦
  var node = svg.selectAll(".node")
    .data(nodes, function(d) { return d.id || (d.id = ++i); });

  var nodeEnter = node.enter().append("g")
      .attr("class", "node")
      .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
      .style("opacity", 0);

  // Enter any new nodes at the parent's previous position.
  nodeEnter.append("rect")
      .attr("y", -barHeight / 2)
      .attr("height", barHeight)
      .attr("width", barWidth)
      .style("fill", color)
      .on("click", click);

  nodeEnter.append("text")
      .attr("dy", 3.5)
      .attr("dx", 5.5)
      .text(function(d) { return d.data.name; });

  // Transition nodes to their new position.
  nodeEnter.transition()
      .duration(duration)
      .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; })
      .style("opacity", 1);

  node.transition()
      .duration(duration)
      .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; })
      .style("opacity", 1)
    .select("rect")
      .style("fill", color);

  // Transition exiting nodes to the parent's new position.
  node.exit().transition()
      .duration(duration)
      .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
      .style("opacity", 0)
      .remove();

  // Update the linksâ¦
  var link = svg.selectAll(".link")
    .data(root.links(), function(d) { return d.target.id; });

  // Enter any new links at the parent's previous position.
  link.enter().insert("path", "g")
      .attr("class", "link")
      .attr("d", function(d) {
        var o = {x: source.x0, y: source.y0};
        return diagonal({source: o, target: o});
      })
    .transition()
      .duration(duration)
      .attr("d", diagonal);

  // Transition links to their new position.
  link.transition()
      .duration(duration)
      .attr("d", diagonal);

  // Transition exiting nodes to the parent's new position.
  link.exit().transition()
      .duration(duration)
      .attr("d", function(d) {
        var o = {x: source.x, y: source.y};
        return diagonal({source: o, target: o});
      })
      .remove();

  // Stash the old positions for transition.
  root.each(function(d) {
    d.x0 = d.x;
    d.y0 = d.y;
  });
}

// Toggle children on click.
function click(d) {
  if (d.children) {
    d._children = d.children;
    d.children = null;
  } else {
    d.children = d._children;
    d._children = null;
  }
  update(d);
}

function color(d) {
  return d._children ? "#3182bd" : d.children ? "#c6dbef" : "#fd8d3c";
}

var freqData=[
{State:'AL',freq:{low:4786, mid:1319, high:249}}
,{State:'AZ',freq:{low:1101, mid:412, high:674}}
,{State:'CT',freq:{low:932, mid:2149, high:418}}
,{State:'DE',freq:{low:832, mid:1152, high:1862}}
,{State:'FL',freq:{low:4481, mid:3304, high:948}}
,{State:'GA',freq:{low:1619, mid:167, high:1063}}
,{State:'IA',freq:{low:1819, mid:247, high:1203}}
,{State:'IL',freq:{low:4498, mid:3852, high:942}}
,{State:'IN',freq:{low:797, mid:1849, high:1534}}
,{State:'KS',freq:{low:162, mid:379, high:471}}
];
dashboard('#dashboard',frequencyData);
</script>
<script src="lib/jquery/jquery.min.js"></script>
  <script src="lib/jquery/jquery-migrate.min.js"></script>
  <script src="lib/superfish/hoverIntent.js"></script>
  <script src="lib/superfish/superfish.min.js"></script>
  <script src="lib/tether/js/tether.min.js"></script>
  <script src="lib/stellar/stellar.min.js"></script>
  <script src="lib/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="lib/counterup/counterup.min.js"></script>
  <script src="lib/waypoints/waypoints.min.js"></script>
  <script src="lib/easing/easing.js"></script>
  <script src="lib/stickyjs/sticky.js"></script>
  <script src="lib/parallax/parallax.js"></script>
  <script src="lib/lockfixed/lockfixed.min.js"></script>

  <!-- Template Specisifc Custom Javascript File -->
  <script src="js/custom.js"></script>

  <script src="contactform/contactform.js"></script>
</body>
</html>
